/* src/components/Alumnos/Familias.css */
/* ========= Variables (paleta roja) ========= */
:root{
  --reg-primary:#B71C1C;
  --reg-primary-light:#E53935;
  --reg-primary-dark:#7F0000;

  --reg-secondary:#1D428A;
  --reg-accent:#C62828;

  --reg-success:#10B981;
  --reg-warning:#F59E0B;
  --reg-danger:#D32F2F;
  --reg-light:#F8FAFC;
  --reg-dark:#0F172A;

  --reg-gray-100:#F1F5F9;
  --reg-gray-200:#E2E8F0;
  --reg-gray-300:#CBD5E1;
  --reg-gray-400:#94A3B8;
  --reg-gray-500:#64748B;
  --reg-gray-600:#475569;
  --reg-gray-700:#334155;
  --reg-gray-800:#1E293B;
  --reg-gray-900:#0F172A;

  --reg-border-radius:12px;
  --reg-border-radius-sm:8px;
  --reg-border-radius-lg:16px;
  --reg-border-radius-xl:20px;

  --reg-transition:all .3s cubic-bezier(.4,0,.2,1);

  --reg-shadow-sm:0 1px 3px rgba(0,0,0,.05);
  --reg-shadow-md:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);
  --reg-shadow-lg:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);
  --reg-shadow-xl:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);

  --mix-primary-10: color-mix(in srgb, var(--reg-primary) 12%, white);
}

/* ========= Página / Topbar ========= */
.ntg-page{
  min-height:100dvh;
  display:flex;
  flex-direction:column;
}

.ntg-topbar{
  min-height:64px;
  padding:10px 20px;
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  gap:16px;
  background:var(--reg-primary);
  color:#fff;
  box-shadow:var(--reg-shadow-sm);
}

.ntg-title{
  margin:0;
  font-weight:800;
  letter-spacing:.2px;
  font-size:1.5rem;
}
.ntg-title, .centrar-intput{ width: 20vw;}
.centrar-intput{display: flex; justify-content: flex-end;}

/* Botón Volver */
.ntg-back{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 12px;
  border-radius:var(--reg-border-radius);
  background:#fff;
  color:var(--reg-primary);
  border:1px solid var(--reg-gray-200);
  cursor:pointer;
  transition:var(--reg-transition);
  font-weight:700;
}
.ntg-back:hover{ filter:brightness(.98); box-shadow:var(--reg-shadow-sm); }

/* ===== Buscador Topbar (lupa ↔ cruz) ===== */
.ntg-search{
  position: relative;
  min-width:440px;
  max-width:640px;
  margin:0 auto;
  display:flex;
  align-items:center;
  background:#fff;
  color:#222;
  border-radius:var(--reg-border-radius);
  padding:0;
  border:1px solid var(--reg-gray-200);
  transition: var(--reg-transition);
}
.ntg-search input{
  border:none;
  outline:none;
  flex:1;
  background:transparent;
  font-size:.95rem;
  padding:10px 40px 10px 12px;
}
.ntg-search:focus-within{
  border-color: color-mix(in srgb, var(--reg-primary) 45%, #fff);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--reg-primary) 18%, #fff);
}
.ntg-search-ico{
  position:absolute;
  right:6px;
  top:50%;
  transform: translateY(-50%);
  width:28px;
  height:28px;
  display:grid;
  place-items:center;
  border:none;
  background:transparent;
  border-radius:8px;
  color: var(--reg-gray-400);
  cursor: pointer;
  transition: var(--reg-transition);
}
.ntg-search-ico:hover{ color: var(--reg-primary); background: var(--reg-gray-100); }
.ntg-search-ico:focus-visible{ outline:0; box-shadow: 0 0 0 3px color-mix(in srgb, var(--reg-primary) 22%, #fff); }
.ntg-search.is-filled .ntg-search-ico{ color: var(--reg-primary); }

/* ========= Contenido / Card / Tabs ========= */
.ntg-content{
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.card{
  background:#fff;
  border:1px solid var(--reg-gray-200);
  border-radius:var(--reg-border-radius-lg);
  box-shadow:var(--reg-shadow-lg);
  overflow:hidden;
}

.card-tabs{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 16px;
  border-bottom:1px solid var(--reg-gray-200);
  background:#fafbff;
}
.tabs{ display:flex; gap:8px; }

.tab{
  background:#fff;
  border:1px solid var(--reg-gray-200);
  padding:8px 12px;
  border-radius:var(--reg-border-radius);
  cursor:pointer;
  transition:var(--reg-transition);
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-weight:600;
}
.tab.active{
  background:var(--mix-primary-10);
  color:var(--reg-primary);
  border-color:transparent;
  box-shadow:var(--reg-shadow-sm);
}
.tab:disabled{ opacity:.5; cursor:not-allowed; }

.actions{ display:flex; gap:8px; flex-wrap:wrap; }

.btn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:9px 12px;
  border-radius:var(--reg-border-radius);
  border:1px solid var(--reg-gray-200);
  background:#fff;
  cursor:pointer;
  font-weight:600;
  transition:var(--reg-transition);
}
.btn:hover{ filter:brightness(.98); box-shadow:var(--reg-shadow-sm); }
.btn.small{ padding:7px 10px; font-size:.92rem; }

/* Botones especiales */
.btn.btn-add{
  background: var(--reg-primary);
  color:#fff;
  border-color: transparent;
  box-shadow: var(--reg-shadow-sm);
}
.btn.btn-add:hover{ transform: translateY(-1px); box-shadow: var(--reg-shadow-md); background: var(--reg-primary-dark); }
.btn.btn-add:active{ transform: translateY(0); box-shadow: var(--reg-shadow-sm); }
.btn.btn-add:focus-visible{ outline: 0; box-shadow: 0 0 0 3px color-mix(in srgb, var(--reg-primary) 25%, white); }

.btn.btn-export{
  background: color-mix(in srgb, var(--reg-success) 12%, white);
  color: color-mix(in srgb, var(--reg-success) 70%, black);
  border-color: color-mix(in srgb, var(--reg-success) 35%, white);
  box-shadow: var(--reg-shadow-sm);
}
.btn.btn-export:hover{
  background: color-mix(in srgb, var(--reg-success) 20%, white);
  border-color: color-mix(in srgb, var(--reg-success) 45%, white);
  transform: translateY(-1px);
  box-shadow: var(--reg-shadow-md);
}
.btn.btn-export:active{ transform: translateY(0); box-shadow: var(--reg-shadow-sm); }
.btn[disabled]{ opacity:.6; cursor:not-allowed; transform:none; box-shadow:none; }

.card-title{
  font-size:1.1rem;
  font-weight:700;
  color:var(--reg-dark);
  padding:14px 16px 0 16px;
  margin:0;
}

/* ========= Tabla ========= */
.ntg-table {
  padding: 12px 16px 16px 16px;
  max-height: 65vh;
  overflow-y: auto;
  border: 1px solid var(--reg-gray-200);
  border-radius: var(--reg-border-radius);
  background: #fff;
}

.ntg-table::-webkit-scrollbar { width: 8px; }
.ntg-table::-webkit-scrollbar-thumb { background: var(--reg-gray-300); border-radius: 4px; }
.ntg-table::-webkit-scrollbar-thumb:hover { background: var(--reg-gray-400); }

.t-head, .t-row{
  display:grid;
  grid-template-columns: 1.4fr 1.4fr 0.9fr 0.8fr 0.9fr;
  align-items:center;
  gap:12px;
}

.t-head{
  padding:10px 12px;
  font-weight:700;
  color:var(--reg-gray-900);
  background:#f6f7fe;
  border:1px solid var(--reg-gray-200);
  border-radius:var(--reg-border-radius);
  margin-bottom:10px;
}
.t-body{ display:flex; flex-direction:column; }
.t-row{
  padding:12px;
  border-bottom:1px solid var(--reg-gray-200);
  border-radius:var(--reg-border-radius);
  background:#fff;
}
.t-row:nth-child(odd){ background:#fcfcff; }
.t-empty{ padding:26px; text-align:center; color:var(--reg-gray-600); }

/* Celdas */
.cell-name{ display:flex; align-items:center; gap:10px; }
.avatar{
  width:34px; height:34px;
  border-radius:var(--reg-border-radius-sm);
  background:var(--mix-primary-10);
  color:var(--reg-primary);
  display:grid; place-items:center;
  font-weight:800;
}
.cell-obs{ color:var(--reg-gray-700); font-size:.94rem; }
.cell-ops{ display:flex; align-items:center; gap:8px; justify-content:center; }
.center{ text-align:center; }

/* Icon buttons */
.icon-btn{
  border:1px solid var(--reg-gray-200);
  background:#fff;
  border-radius:var(--reg-border-radius-sm);
  padding:7px 9px;
  cursor:pointer;
  transition:var(--reg-transition);
}
.icon-btn svg{ width:16px; height:16px; pointer-events:none; }
.icon-btn:hover{ background:var(--reg-gray-100); }
.icon-btn.danger{ color: var(--reg-danger); border-color:color-mix(in srgb, var(--reg-danger) 25%, white); }
.icon-btn.danger:hover{
  background: color-mix(in srgb, var(--reg-danger) 8%, white);
  border-color: color-mix(in srgb, var(--reg-danger) 45%, white);
  box-shadow: var(--reg-shadow-sm);
  transform: translateY(-1px);
}
.icon-btn--link{
  color: var(--reg-primary);
  border-color: color-mix(in srgb, var(--reg-primary) 30%, white);
  background: #fff;
}
.icon-btn--link:hover{
  background: color-mix(in srgb, var(--reg-primary) 8%, white);
  border-color: color-mix(in srgb, var(--reg-primary) 45%, white);
  box-shadow: var(--reg-shadow-sm);
  transform: translateY(-1px);
}
.icon-btn--link:active{ transform: translateY(0); }
.icon-btn--link:focus-visible{
  outline: 0;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--reg-primary) 25%, white);
}
.icon-btn--edit{
  color: var(--reg-primary);
  border-color: color-mix(in srgb, var(--reg-primary) 30%, white);
  background: #fff;
}
.icon-btn--edit:hover{
  background: color-mix(in srgb, var(--reg-primary) 10%, white);
  border-color: color-mix(in srgb, var(--reg-primary) 45%, white);
  box-shadow: var(--reg-shadow-sm);
  transform: translateY(-1px);
}
.icon-btn--edit:active{ transform: translateY(0); }
.icon-btn--edit:focus-visible{
  outline: 0;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--reg-primary) 28%, white);
}

/* ========= Responsive ========= */
@media (max-width:900px){
  .ntg-search{ max-width:100%; min-width:0; }
}
@media (max-width:640px){
  .ntg-topbar{ grid-template-columns: 1fr auto; row-gap: 10px; }
  .ntg-search{ display:none; }
  .ntg-title{ font-size:1rem; }
}

/* ========= MODAL ELIMINAR FAMILIA ========= */
@keyframes famdel-fadeIn { from { opacity: 0 } to { opacity: 1 } }
@keyframes famdel-pop { from { transform: translateY(4px); opacity: .98 } to { transform: translateY(0); opacity: 1 } }

.famdel-modal-overlay{
  position: fixed;
  inset: 0;
  background-color: rgba(0,0,0,.5);
  backdrop-filter: blur(4px);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:1000;
  animation: famdel-fadeIn .2s ease-out;
  padding:20px;
  box-sizing:border-box;
}
.famdel-modal-container{
  background:#fff;
  border-radius:16px;
  width:90%;
  max-width:420px;
  padding:24px;
  box-shadow: var(--reg-shadow-xl);
  text-align:center;
  position:relative;
  border-top:4px solid transparent;
  animation: famdel-pop .18s ease-out;
  box-sizing:border-box;
}
.famdel-modal--danger{ border-top-color: var(--reg-danger); }
.famdel-modal__icon{
  font-size:2.2rem;
  color: var(--reg-danger);
  margin-bottom:.8rem;
}
.famdel-modal-title{
  font-size:1.2rem;
  font-weight:700;
  color: var(--reg-dark);
  margin-bottom:10px;
  line-height:1.4;
}
.famdel-modal-title--danger{ color: var(--reg-danger); }
.famdel-modal-text{
  font-size:.95rem;
  color: var(--reg-gray-700);
  margin-bottom:12px;
  line-height:1.5;
}

.famdel-modal-buttons{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}
.famdel-btn{
  padding:.6rem 1rem;
  border-radius:10px;
  font-weight:700;
  font-size:.9rem;
  cursor:pointer;
  transition:var(--reg-transition);
  flex:1;
  max-width:160px;
  min-width:110px;
  border:1px solid transparent;
  box-sizing:border-box;
}
.famdel-btn--ghost{
  background:#fff;
  color:#374151;
  border-color:#CBD5E1;
}
.famdel-btn--ghost:hover{
  background:#F1F5F9;
  transform:translateY(-2px);
  box-shadow:0 10px 18px rgba(0,0,0,.12);
}
.famdel-btn--solid-danger{
  background: var(--reg-danger);
  color:#fff;
  border-color: var(--reg-danger);
}
.famdel-btn--solid-danger:hover{
  filter:brightness(.95);
  transform:translateY(-2px);
  box-shadow:0 10px 18px rgba(211,47,47,.2);
}

@media (max-width:360px){
  .famdel-modal-container{ padding:20px; }
  .famdel-modal__icon{ font-size:2rem; }
  .famdel-modal-title{ font-size:1.1rem; }
  .famdel-modal-text{ font-size:.88rem; }
  .famdel-btn{ padding:.5rem .8rem; font-size:.85rem; min-width:96px; }
}

/* ========= Checklist reutilizado del ModalMiembros ========= */
.modalmi-selectable{ position:relative; display:inline-grid; grid-template-columns:auto 1fr; align-items:center; gap:10px; }
.modalmi-selectable input{ position:absolute; inset:0; opacity:0; pointer-events:none; }
.modalmi-checkslot{
  width:28px; height:28px;
  border-radius:8px;
  display:grid; place-items:center;
  border:2px solid var(--reg-gray-200);
  color:var(--reg-primary);
  background:#fff;
}
.modalmi-selectable.is-checked .modalmi-checkslot{
  border-color: var(--reg-primary);
  background: var(--reg-primary);
  color:#fff;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--reg-primary) 20%, #fff);
}
.modalmi-checkslot::before{ content:""; }
.modalmi-selectable.is-checked .modalmi-checkslot::before{
  content:"✓"; font-size:16px; font-weight:900; line-height:1;
}
.famdel-check-mini{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 8px 0 16px;
  cursor: pointer;
  user-select: none;
}
.famdel-check-mini .modalmi-checkslot{ width: 28px; height: 28px; }
.famdel-check-mini-text{ font-weight: 600; color: var(--reg-gray-800); line-height: 1.25; }

/* ====== RESPONSIVE EXTRAS ====== */

/* Tablets medianas: escondé Observaciones y compactá columnas */
@media (max-width: 900px){
  .hide-sm{ display:none !important; }
  .t-head,
  .t-row{
    grid-template-columns: 1.6fr 1fr 0.9fr 1fr; /* nombre | fecha | miembros | ops */
  }
}

/* Tablets chicas / phablets */
@media (max-width: 720px){
  /* Sacamos el header de tabla y pasamos a layout tipo tarjeta */
  .t-head{ display:none; }

  .ntg-table{
    padding: 10px;
    max-height: unset;   /* evitá recorte en móviles, usa scroll natural */
    overflow: visible;
    border: none;
  }

  .t-body{ gap: 10px; }

  .t-row{
    display: grid;
    grid-template-columns: 1fr auto;           /* nombre | ops */
    grid-template-areas:
      "name ops"
      "date date"
      "members members"
      "obs obs";
    gap: 8px 10px;
    border: 1px solid var(--reg-gray-200);
    box-shadow: var(--reg-shadow-sm);
    padding: 12px;
  }

  /* Mapeo a áreas sin tocar JSX (por posición) */
  .t-row > div:nth-child(1){ grid-area: name; }     /* .cell-name */
  .t-row > div:nth-child(2){ grid-area: obs; }      /* .cell-obs (venía oculta en >=900px) */
  .t-row > div:nth-child(3){ grid-area: date; }     /* Fecha (center) */
  .t-row > div:nth-child(4){ grid-area: members; }  /* Miembros (center) */
  .t-row > div:nth-child(5){ grid-area: ops; justify-self:end; }  /* .cell-ops */

  /* Fichas: título más grande y avatar un toque más chico */
  .cell-name .name{ font-weight: 800; font-size: 1rem; }
  .avatar{ width: 30px; height: 30px; font-size: .95rem; }

  /* Rótulos para que se entienda cada dato en tarjeta */
  .t-row > div:nth-child(3)::before,
  .t-row > div:nth-child(4)::before,
  .t-row > div:nth-child(2)::before{
    display: block;
    font-size: .8rem;
    font-weight: 700;
    color: var(--reg-gray-500);
    margin-bottom: 4px;
    letter-spacing: .2px;
    content: "";
  }
  .t-row > div:nth-child(3)::before{ content: "Fecha alta"; }
  .t-row > div:nth-child(4)::before{ content: "Miembros"; }
  .t-row > div:nth-child(2)::before{ content: "Observaciones"; }

  /* Observaciones en móvil: multiline, tono más claro */
  .cell-obs{ color: var(--reg-gray-700); font-size: .92rem; }

  /* Botones de acción: mejor target táctil */
  .icon-btn{ padding: 8px 10px; }
  .icon-btn svg{ width: 18px; height: 18px; }
}

/* Mobile angosto */
@media (max-width: 560px){
  /* Topbar más compacto: título y volver; buscador ya se oculta en tu CSS */
  .ntg-topbar{
    grid-template-columns: 1fr auto;
    gap: 10px;
    padding: 10px 12px;
  }
  .ntg-title{ font-size: 1rem; width:auto; }
  .centrar-intput{ width:auto; }

  /* Acciones: botones en 2 líneas si hace falta */
  .actions{ gap: 6px; }
  .btn{ padding: 8px 10px; font-size: .9rem; }
  .btn.small{ font-size: .88rem; padding: 7px 9px; }

  /* Tarjetas más “respirables” */
  .t-row{ border-radius: 12px; }
}

/* Mobile muy chico */
@media (max-width: 420px){
  .btn.btn-add, .btn.btn-export{
    flex: 1 1 100%;
    justify-content: center;
  }
  .card-tabs{ flex-direction: column; align-items: stretch; gap: 10px; }
  .tabs{ order: 1; }
  .actions{ order: 2; display: grid; grid-template-columns: 1fr; }

  /* En tarjetas: alineá mejor header (name | ops) */
  .t-row{
    grid-template-columns: 1fr auto;
  }
  .icon-btn{ padding: 8px; }
}

/* Accesibilidad: reduce animaciones si el usuario lo pide */
@media (prefers-reduced-motion: reduce){
  .ntg-back,
  .btn,
  .icon-btn,
  .famdel-btn{
    transition: none !important;
  }
}
