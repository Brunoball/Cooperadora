/* ====== :root ROJO (sin degradados) ‚Äî variables con prefijo reg- ====== */
:root {
  /* üé® PALETA ROJA */
  --reg-primary: #B71C1C;          /* Rojo principal */
  --reg-primary-light: #E53935;    /* Rojo claro para focus/hover */
  --reg-primary-dark: #7F0000;     /* Rojo profundo para hover */

  --reg-secondary: #1D428A;        /* Azul secundario (para ingresos) */
  --reg-accent: #C62828;           /* Rojo acento (para egresos) */

  --reg-success: #10B981;
  --reg-warning: #F59E0B;
  --reg-danger: #D32F2F;

  --reg-light: #F8FAFC;
  --reg-dark: #0F172A;

  --reg-gray-100: #F1F5F9;
  --reg-gray-200: #E2E8F0;
  --reg-gray-300: #CBD5E1;
  --reg-gray-400: #94A3B8;
  --reg-gray-500: #64748B;
  --reg-gray-600: #475569;
  --reg-gray-700: #334155;
  --reg-gray-800: #1E293B;
  --reg-gray-900: #0F172A;

  --reg-border-radius: 12px;
  --reg-border-radius-lg: 16px;
  --reg-border-radius-xl: 20px;

  --reg-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

  --reg-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
  --reg-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --reg-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --reg-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* =============== Tokens del componente mapeados a la paleta roja =============== */
.rc_shell{
  --bg: var(--reg-gray-100);
  --surface: #fff;
  --border: var(--reg-gray-200);
  --text: var(--reg-dark);
  --muted: var(--reg-gray-500);

  --primary: var(--reg-primary);
  --primary-600: var(--reg-primary-dark);
  --accent: var(--reg-accent);

  --green: var(--reg-success);
  --red: var(--reg-danger);

  --ok: var(--reg-success);
  --warn: var(--reg-danger);

  --r-lg: var(--reg-border-radius-lg);
  --r-md: var(--reg-border-radius);
  --shadow: var(--reg-shadow-lg);
  --shadow-soft: var(--reg-shadow-sm);
}

/* =========================== Layout base =========================== */
.rc_shell{
  display:grid;
  grid-template-columns: clamp(15rem, 22vw, 18rem) 1fr; /* sidebar + main */
  gap:1.25rem;
  padding:0 1.25rem;
  background:var(--bg);
}

.rc_shell *{ box-sizing:border-box; }

/* ---------- SIDEBAR ---------- */
.rc_side{
  position:sticky;
  top:1rem;
  align-self:start;

  background:var(--reg-dark);
  color:#e5e7eb;
  border-radius:var(--r-lg);
  box-shadow:var(--shadow);
  padding:1rem;
  min-height:min(80vh, 100%);
  display:flex;
  flex-direction:column;
  gap:1rem;
}

.rc_brand{
  font-weight:900;
  letter-spacing:.06em;
  font-size:clamp(0.9rem, 1.2vw, 1rem);
  color:#e2e8f0;
  opacity:.9;
}

.rc_side_group{
  background:rgba(255,255,255,.03);
  border:1px solid rgba(148,163,184,.18);
  border-radius:var(--r-md);
  padding:1rem;
}

.rc_side_title{
  display:flex;
  align-items:center;
  gap:.5rem;
  font-weight:800;
  margin-bottom:.75rem;
  color:#cbd5e1;
  font-size:.95rem;
}

.rc_slabel{
  display:block;
  font-size:.75rem;
  font-weight:700;
  color:#a3aed0;
  margin-bottom:.35rem;
}

.rc_sselect{
  width:100%;
  background:#0f172a;
  color:#e2e8f0;
  border:1px solid rgba(148,163,184,.28);
  border-radius:.75rem;
  padding:.6rem .75rem;
  outline:none;
  transition: var(--reg-transition);
}
.rc_sselect:focus{
  border-color: var(--reg-primary-light);
  box-shadow:0 0 0 .2rem rgba(229,57,53,.18);
}

.rc_sublabel{
  margin:.9rem 0 .35rem;
  color:#a3aed0;
  font-weight:800;
  font-size:.75rem;
}

.rc_spills{
  display:flex; gap:.5rem; flex-wrap:wrap;
}
.rc_spill{
  border:1px solid rgba(148,163,184,.25);
  background:#0f172a;
  color:#cbd5e1;
  border-radius:999px;
  padding:.4rem .75rem;
  font-weight:800;
  font-size:.8rem;
  cursor:pointer;
  transition: var(--reg-transition);
}
.rc_spill:hover{ border-color:var(--reg-primary-light); color:#fff; }
.rc_spill.active{
  color:#fff;
  background: var(--primary);          /* sin degradados */
  border-color: var(--primary);
  box-shadow: var(--reg-shadow-md);
}

/* Totales en sidebar */
.rc_side_metrics{
  display:grid;
  gap:.75rem;
}
.rc_side .rc_metric{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(148,163,184,.18);
  border-radius:var(--r-md);
  box-shadow:none;
}
.rc_side .rc_metric__label{ color:#a3aed0; }
.rc_side .rc_metric__value{ color:#e5e7eb; }

/* ---------- MAIN ---------- */
.rc_main{ min-width:0; }

.rc_topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:1rem;
}
.rc_title{
  margin:0;
  font-size:clamp(1rem, 2vw, 1.25rem);
  color:var(--text);
}

/* Tarjetas base */
.card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  box-shadow:var(--shadow);
}

/* =========================== M√©tricas =========================== */
.rc_metric{
  display:grid;
  grid-template-columns:3.2rem 1fr;
  gap:.75rem; align-items:center;
  padding:.9rem;
}
.rc_metric__icon{
  width:3.2rem; height:3.2rem;
  border-radius:1rem;
  display:grid; place-items:center;
  color:#fff; font-weight:900;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.35);
}
.rc_metric__icon.ing{ background: var(--green); } /* s√≥lido */
.rc_metric__icon.egr{ background: var(--red);   } /* s√≥lido */
.rc_metric__icon.ok{  background: var(--ok);    }
.rc_metric__icon.warn{ background: var(--warn); }

.rc_metric__label{ margin:0; font-size:.75rem; color:var(--muted); font-weight:700; }
.rc_metric__value{ margin:.2rem 0 0; font-size:clamp(1rem, 2vw, 1.35rem); font-weight:900; }

/* =========================== Tabs de gr√°ficos =========================== */
.rc_tabs_main{
  display:inline-flex;
  gap:.5rem;
  background: var(--reg-light);
  border:1px solid var(--border);
  border-radius:14px;
  padding:.35rem;
}
.rc_mtab{
  border:0;
  background:transparent;
  font-weight:900;
  color:var(--reg-gray-600);
  padding:.5rem .9rem;
  border-radius:999px;
  cursor:pointer;
  transition: var(--reg-transition);
}
.rc_mtab:hover{ background:#fff; color: var(--primary-600); }
.rc_mtab.active{
  color:#fff;
  background: var(--primary);          /* sin degradados */
  box-shadow: var(--reg-shadow-md);
}
.rc_card__header{
  padding: .9rem 1rem;
  border-bottom: 1px solid var(--border);
}
.rc_chart_body{ padding:.75rem; }

/* =========================== Donut =========================== */
.rc_donut{ display:flex; gap:1rem; align-items:center; justify-content:center; padding:.75rem; }
.rc_donut_total{ font-weight:900; font-size:1.125rem; fill:var(--text); }
.rc_donut_label{ font-size:.75rem; fill:var(--muted); }
.rc_legend{ display:grid; gap:.4rem; }
.rc_legend_item{ display:flex; align-items:center; gap:.5rem; color:var(--reg-gray-700); font-weight:700; }
.rc_legend_item strong{ margin-left:.5rem; }
.dot{ width:.75rem; height:.75rem; border-radius:999px; display:inline-block; }
.dot.ing{ background: var(--reg-secondary); } /* azul ingresos */
.dot.egr{ background: var(--reg-accent); }    /* rojo egresos */

/* =========================== L√≠nea =========================== */
.rc_line{ padding:.5rem; }
.rc_line .axis line{ stroke: var(--reg-gray-200); stroke-width:1; }
.rc_line_label{ font-size:.7rem; fill:var(--muted); }

/* =========================== Tabla =========================== */
.rc_table__wrap{ width:100%; overflow:auto; /* max-height controlado por flex */ }
.gt_table{ --cols:auto; display:grid; gap:.6rem; }
.gt_table.gt_cols-4{ --cols: 8rem 1fr 1fr 1fr; }

.gt_header{ display:grid; grid-template-columns:var(--cols); }
.gt_header .gt_cell.h{ font-size:.85rem; color:var(--muted); font-weight:900; padding:0 .75rem .45rem; }

.gt_row{
  display:grid; grid-template-columns:var(--cols);
  background:#fff; border:1px solid var(--border); border-radius:.9rem;
  box-shadow:var(--shadow-soft); align-items:center;
}
.gt_cell{ padding:.9rem .75rem; }
.gt_cell.right{ text-align:right; font-weight:800; }
.gt_cell.pos{ color:#15803d; }
.gt_cell.neg{ color:#b91c1c; }

.gt_empty{
  text-align:center; color:var(--muted); padding:1rem .5rem;
  border:1px dashed var(--border); border-radius:.9rem; background:var(--reg-light);
}

/* =========================== Dos columnas: gr√°fico + tabla =========================== */
.rc_twocol{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:1rem;
  align-items: stretch;          /* estira ambas tarjetas a la misma fila */
}

/* Las tarjetas llenan la fila y reparten interior en columna */
.rc_twocol .rc_card{
  height:100%;
  display:flex;
  flex-direction:column;
}

/* Cuerpo estira para igualar alturas */
.rc_card--chart .rc_chart_body,
.rc_card--table .rc_table__wrap{
  flex:1 1 auto;                 /* ocupa el alto disponible */
  min-height: 320px;             /* altura m√≠nima com√∫n (pod√©s subirla) */
}

/* Centrado agradable del gr√°fico dentro de su √°rea */
.rc_card--chart .rc_chart_body{
  display:flex;
  align-items:center;
  justify-content:center;
  padding: .75rem;
}

/* La tabla scrollea dentro del alto compartido */
.rc_card--table .rc_table__wrap{
  overflow:auto;
   max-height: 60vh;       /* usamos el alto flexible */
}

/* =========================== Responsive =========================== */
@media (max-width: 1100px){
  .gt_table{ min-width:40rem; }
}
@media (max-width: 900px){
  .rc_shell{ grid-template-columns: 1fr; }
  .rc_side{ position:static; order:-1; }
  .rc_twocol{ grid-template-columns: 1fr; }
}
@media (max-width: 640px){
  .rc_side_metrics { grid-template-columns:1fr; }
}
/* ====== Opci√≥n A: ocupar todo el alto menos el header (solo CSS) ====== */

/* 1) Defin√≠ la altura fija del header una sola vez */
:root{
  --header-h: 90.33px; /* cambi√° este valor si tu header cambia */
}

/* 2) Hac√© que el layout use (viewport - header) */
.rc_shell{
  min-height: calc(100dvh - var(--header-h)); /* 100dvh respeta la UI m√≥vil */
  display: grid;
  grid-template-columns: clamp(15rem, 22vw, 18rem) 1fr;
  gap: 1.25rem;

  /* dej√° tu background/tokenes existentes ac√° */
}

/* 3) Permit√≠ que el contenido interno crezca y scrollee */
.rc_main{
  min-width: 0;
  display: flex;
  flex-direction: column;
  min-height: 0; /* clave para scroll interno */
}

/* 4) Dos columnas: gr√°fico + tabla usando todo el alto disponible */
.rc_twocol{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  align-items: stretch;
  flex: 1 1 auto; /* ocupa el resto del alto en .rc_main */
  min-height: 0;  /* habilita scroll en hijos */
}

/* 5) Las cards reparten su alto internamente */
.rc_twocol .rc_card{
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0; /* evita overflow no deseado */
}

/* 6) El gr√°fico y la tabla ocupan el espacio restante dentro de su card */
.rc_card--chart .rc_chart_body,
.rc_card--table .rc_table__wrap{
  flex: 1 1 auto;
  min-height: 0;
}

/* 7) La tabla scrollea dentro de su tarjeta (no en toda la p√°gina) */
.rc_card--table .rc_table__wrap{
  overflow: auto;
  /* asegurate de NO tener max-height fijo ac√° */
}

/* 8) Sidebar sticky (opcional, queda bien con header relativo) */
.rc_side{
  position: sticky;
  top: 1rem;      /* separadito del borde superior del √°rea √∫til */
  align-self: start;
  height: 100%;
}

/* 9) Responsive (opcional, si ya lo ten√≠as, dejalo) */
@media (max-width: 900px){
  .rc_shell{ grid-template-columns: 1fr; }
  .rc_side{ position: static; order: -1; }
  .rc_twocol{ grid-template-columns: 1fr; }
}
